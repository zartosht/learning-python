<script>
  $(document).ready(function () {
    const loaderjs = document.createElement('script');
    loaderjs.src = '/assets/js/loader.js';

    loaderjs.onload = function () {
      require.config({
        paths: { 'vs': 'https://cdn.jsdelivr.net/npm/monaco-editor@0.45.0/min/vs' }
      });
      require(['vs/editor/editor.main'], function () {
        const codeContainer = document.querySelector('pre > code');
        const pre = codeContainer.parentElement;
        const editor = monaco.editor.create(codeContainer, {
          value: codeContainer.textContent,
          language: 'python',
          theme: 'vs-dark'
        });

        // Set the editor size to the pre size
        const width = pre.offsetWidth;
        const height = pre.offsetHeight;
        editor.layout({ width, height: height + 30 });

        // The editor is ready to be used
        // Hide the original code
        pre.style.display = 'none';
      });
    };

    document.body.appendChild(loaderjs);
  });
</script>